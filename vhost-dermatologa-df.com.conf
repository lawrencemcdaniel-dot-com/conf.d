<virtualHost *:8080>

  ServerName dermatologa-df.com:80
  DocumentRoot /var/www/html/dermatologa-df.com/
  ServerAdmin lpm0073@gmail.com
  ErrorLog /var/www/logs/error_log_dermatologa-df.com 

  # all traffic originating from the AWS ELB travels over http, even if the originating source was https.
  # we do this because both the ELB and this EC2 instances are inside the firewall and not need encrypted traffic.
  #
  # the following rewrite rule internally redirects all traffic to https.
  RewriteEngine On
  RewriteCond %{HTTP:X-Forwarded-Proto} =http
  RewriteRule .* https://%{HTTP:Host}%{REQUEST_URI} [L,R=permanent]

</VirtualHost>
<virtualHost *:8080>

  ServerName www.dermatologa-df.com:80
  DocumentRoot /var/www/html/dermatologa-df.com/
  ServerAdmin lpm0073@gmail.com
  ErrorLog /var/www/logs/error_log_dermatologa-df.com

  # all traffic originating from the AWS ELB travels over http, even if the originating source was https.
  # we do this because both the ELB and this EC2 instances are inside the firewall and not need encrypted traffic.
  #
  # the following rewrite rule internally redirects all traffic to https.
  RewriteEngine On
  RewriteCond %{HTTP:X-Forwarded-Proto} =http
  RewriteRule .* https://%{HTTP:Host}%{REQUEST_URI} [L,R=permanent]

</VirtualHost>
